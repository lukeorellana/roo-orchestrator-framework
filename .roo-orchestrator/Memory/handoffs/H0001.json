{
  "contract_id": "H0001",
  "version": "2.0",
  "created_at": "2025-09-03T13:05:00Z",
  "from_mode": "orchestrator",
  "to_mode": "code-fast",
  "title": "Refactor auth token refresh path",
  "objective": "Make the refresh path observable and covered by tests without changing behavior.",
  "dispatch_mode": "code-fast",
  "scope": ["Extract refresh() to helper", "Add unit tests for 401→refresh→retry"],
  "allowed_files": ["src/auth/*.ts", "tests/auth/*.ts"],
  "entry_point": "npm test -w auth",
  "constraints": ["≤45m", "no scope creep", "security:keep-secrets-out"],
  "acceptance_criteria": [
    "All auth tests green",
    "No public API diff in docs/api.md"
  ],
  "tools_allowed": ["read", "edit", "command"],
  "artifacts_to_update": ["Implementation_Plan.md", ".roo-orchestrator/Memory/handoff_ledger.json"],
  "context_pack": {
    "goal": "Improve testability and logging around token refresh.",
    "constraints": ["no performance regressions >2%"],
    "acceptance_criteria": [
      "All auth tests green",
      "No public API diff in docs/api.md"
    ],
    "active_files": ["src/auth/*.ts", "tests/auth/*.ts"],
    "delta_digest": "diffstat: 2 files changed (expected)\nfailures: none",
    "tests_to_run": ["npm test -w auth --silent"]
  },
  "trace": {"issue_ref": "ISSUE-123", "commit_ref": "<sha>"},
  "ttl_runs": 2,
  "notes": "See Design ADR-017 for auth boundaries."
}
